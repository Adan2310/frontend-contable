"use strict";(self["webpackChunkfrontend_contable"]=self["webpackChunkfrontend_contable"]||[]).push([[440],{2118:function(e,o,a){a.d(o,{A:function(){return u}});var t=a(6768),l=a.p+"img/image.f199c5ca.png";const r={class:"barra-lateral"},s={class:"settings-section"};function n(e,o,a,n,i,c){const d=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("div",r,[o[6]||(o[6]=(0,t.Lk)("div",{class:"logo"},[(0,t.Lk)("img",{src:l,alt:"Logo",class:"logo-img"}),(0,t.Lk)("span",{class:"logo-text"},"JAVB")],-1)),(0,t.Lk)("ul",null,[(0,t.Lk)("li",null,[(0,t.bF)(d,{to:"/home",class:"menu-item","active-class":"active"},{default:(0,t.k6)((()=>o[1]||(o[1]=[(0,t.eW)(" HOME ")]))),_:1})]),(0,t.Lk)("li",null,[(0,t.bF)(d,{to:"/contactos",class:"menu-item","active-class":"active"},{default:(0,t.k6)((()=>o[2]||(o[2]=[(0,t.eW)(" CONTACTOS ")]))),_:1})]),(0,t.Lk)("li",null,[(0,t.bF)(d,{to:"/ventas",class:"menu-item","active-class":"active"},{default:(0,t.k6)((()=>o[3]||(o[3]=[(0,t.eW)(" FACTURAS ")]))),_:1})]),(0,t.Lk)("li",null,[(0,t.bF)(d,{to:"/facturas-recurrentes",class:"menu-item","active-class":"active"},{default:(0,t.k6)((()=>o[4]||(o[4]=[(0,t.eW)(" FACTURAS RECURRENTES ")]))),_:1})]),(0,t.Lk)("li",null,[(0,t.bF)(d,{to:"/cotizaciones",class:"menu-item","active-class":"active"},{default:(0,t.k6)((()=>o[5]||(o[5]=[(0,t.eW)(" COTIZACIONES ")]))),_:1})])]),(0,t.Lk)("div",s,[(0,t.Lk)("button",{onClick:o[0]||(o[0]=(...e)=>c.logout&&c.logout(...e)),class:"logout-btn"}," CERRAR SESIÓN ")])])}a(4114);var i={methods:{logout(){localStorage.clear(),this.$router.push("/")}}},c=a(1241);const d=(0,c.A)(i,[["render",n],["__scopeId","data-v-76605de2"]]);var u=d},3697:function(e,o,a){a.d(o,{A:function(){return A}});var t=a(6768),l=a(4232),r=a(5130);const s=["src"],n={class:"user-info"},i={class:"user-name"},c={class:"user-role"},d={key:0,class:"dialog-overlay"},u={class:"dialog"},m={class:"form-group"},p=["src"],g={class:"form-group"},h={class:"form-group"},b={class:"form-group"},k={class:"form-group"},f={class:"button-group"};function v(e,o,a,v,L,U){return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.Lk)("div",{class:"user-bar",onClick:o[0]||(o[0]=(...e)=>U.openUserDialog&&U.openUserDialog(...e))},[(0,t.Lk)("img",{src:L.userProfileImage||L.defaultImage,alt:"Imagen de usuario",class:"profile-picture"},null,8,s),(0,t.Lk)("div",n,[(0,t.Lk)("span",i,(0,l.v_)(L.usuario||"USUARIO"),1),(0,t.Lk)("span",c,(0,l.v_)(L.apodo||"APODO"),1)])]),L.showDialog?((0,t.uX)(),(0,t.CE)("div",d,[(0,t.Lk)("div",u,[o[13]||(o[13]=(0,t.Lk)("h3",{class:"dialog-title"},"Información del Usuario",-1)),(0,t.Lk)("form",{onSubmit:o[7]||(o[7]=(0,r.D$)(((...e)=>U.updateUser&&U.updateUser(...e)),["prevent"]))},[(0,t.Lk)("div",m,[(0,t.Lk)("img",{src:L.userProfileImage||L.defaultImage,alt:"Imagen de perfil",class:"profile-image-preview"},null,8,p)]),(0,t.Lk)("div",g,[o[8]||(o[8]=(0,t.Lk)("label",{for:"profileImage"},"Actualizar Foto de Perfil:",-1)),(0,t.Lk)("input",{type:"file",id:"profileImage",onChange:o[1]||(o[1]=(...e)=>U.onFileChange&&U.onFileChange(...e))},null,32)]),(0,t.Lk)("div",h,[o[9]||(o[9]=(0,t.Lk)("label",{for:"usuario"},"Usuario:",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",id:"usuario","onUpdate:modelValue":o[2]||(o[2]=e=>L.editableUser.usuario=e),required:""},null,512),[[r.Jo,L.editableUser.usuario]])]),(0,t.Lk)("div",b,[o[10]||(o[10]=(0,t.Lk)("label",{for:"apodo"},"Apodo:",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",id:"apodo","onUpdate:modelValue":o[3]||(o[3]=e=>L.editableUser.apodo=e),required:""},null,512),[[r.Jo,L.editableUser.apodo]])]),(0,t.Lk)("div",k,[o[11]||(o[11]=(0,t.Lk)("label",{for:"password"},"Nueva Contraseña:",-1)),(0,t.bo)((0,t.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":o[4]||(o[4]=e=>L.editableUser.password=e),placeholder:"Dejar vacío para no cambiar"},null,512),[[r.Jo,L.editableUser.password]])]),(0,t.Lk)("div",f,[o[12]||(o[12]=(0,t.Lk)("button",{type:"submit",class:"save-button"},"Guardar Cambios",-1)),(0,t.Lk)("button",{type:"button",onClick:o[5]||(o[5]=(...e)=>U.deleteUser&&U.deleteUser(...e)),class:"delete-button"}," Eliminar Usuario "),(0,t.Lk)("button",{type:"button",onClick:o[6]||(o[6]=(...e)=>U.closeUserDialog&&U.closeUserDialog(...e)),class:"close-button"}," Cerrar ")])],32)])])):(0,t.Q3)("",!0)])}a(4114),a(4603),a(7566),a(8721);var L=a(4373),U={data(){return{showDialog:!1,usuario:"",apodo:"",userProfileImage:"",defaultImage:"https://via.placeholder.com/50",editableUser:{usuario:"",apodo:"",password:"",profileImage:null},profileImage:null,backendUrl:"http://localhost:3000"}},created(){this.loadUserData()},methods:{async loadUserData(){try{const e=localStorage.getItem("token"),o=localStorage.getItem("id");if(!o||!e)return void console.error("No se encontró el ID del usuario o el token en el almacenamiento local.");const a=await L.A.get(`${this.backendUrl}/api/usuario/getbyId/${o}`,{headers:{Authorization:`Bearer ${e}`}});this.usuario=a.data.usuario||"USUARIO",this.apodo=a.data.apodo||"APODO",this.userProfileImage=this.getFullImageUrl(a.data.profileImage),this.editableUser=a.data}catch(e){console.error("Error al cargar los datos del usuario:",e)}},openUserDialog(){this.showDialog=!0},closeUserDialog(){this.showDialog=!1},getFullImageUrl(e){return`${this.backendUrl}${e}`},onFileChange(e){this.profileImage=e.target.files[0],this.userProfileImage=URL.createObjectURL(this.profileImage)},async updateUser(){try{const e=localStorage.getItem("token"),o=localStorage.getItem("id");if(!o||!e)return void alert("No se encontró el ID del usuario o el token en el almacenamiento local.");const a=new FormData;a.append("usuario",this.editableUser.usuario),a.append("apodo",this.editableUser.apodo),this.editableUser.password&&a.append("password",this.editableUser.password),this.profileImage&&a.append("profileImage",this.profileImage),await L.A.put(`${this.backendUrl}/api/usuario/update/${o}`,a,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}}),this.usuario=this.editableUser.usuario,this.apodo=this.editableUser.apodo,alert("Información actualizada correctamente."),this.closeUserDialog()}catch(e){console.error("Error al actualizar usuario:",e),alert("No se pudo actualizar la información.")}},async deleteUser(){try{const e=localStorage.getItem("token"),o=localStorage.getItem("id");if(!o||!e)return void alert("No se encontró el ID del usuario o el token en el almacenamiento local.");await L.A.delete(`${this.backendUrl}/api/usuario/delete/${o}`,{headers:{Authorization:`Bearer ${e}`}}),alert("Usuario eliminado correctamente."),localStorage.clear(),this.$router.push("/")}catch(e){console.error("Error al eliminar usuario:",e),alert("No se pudo eliminar el usuario.")}}}},I=a(1241);const C=(0,I.A)(U,[["render",v],["__scopeId","data-v-999e8b52"]]);var A=C},710:function(e,o,a){a.r(o),a.d(o,{default:function(){return D}});var t=a(6768),l=a(4232),r=a(5130);const s={class:"page-container"},n={class:"main-content"},i={class:"content"},c={class:"add-contact-container"},d={class:"table-container"},u=["onClick"],m=["onClick"],p={key:0,class:"modal-overlay"},g={class:"modal"},h={class:"form-group"},b={class:"form-group"},k={class:"form-group"},f={class:"form-group"},v={class:"button-group"},L={type:"submit",class:"save-button"};function U(e,o,a,U,I,C){const A=(0,t.g2)("BarraLateral"),y=(0,t.g2)("Userbar");return(0,t.uX)(),(0,t.CE)("div",s,[(0,t.bF)(A),(0,t.Lk)("div",n,[(0,t.bF)(y),(0,t.Lk)("main",i,[o[8]||(o[8]=(0,t.Lk)("h1",null,"Clientes",-1)),(0,t.Lk)("div",c,[(0,t.Lk)("button",{class:"add-contact-button",onClick:o[0]||(o[0]=(...e)=>C.openAddContactModal&&C.openAddContactModal(...e))}," + Agregar nuevo Contacto ")]),(0,t.Lk)("div",d,[(0,t.Lk)("table",null,[o[7]||(o[7]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"Nombre"),(0,t.Lk)("th",null,"Tax ID"),(0,t.Lk)("th",null,"Teléfono"),(0,t.Lk)("th",null,"Observaciones"),(0,t.Lk)("th",null,"Acciones")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(I.contacts,(e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id},[(0,t.Lk)("td",null,(0,l.v_)(e.nombre),1),(0,t.Lk)("td",null,(0,l.v_)(e.taxId),1),(0,t.Lk)("td",null,(0,l.v_)(e.telefono),1),(0,t.Lk)("td",null,(0,l.v_)(e.observaciones),1),(0,t.Lk)("td",null,[(0,t.Lk)("button",{class:"edit-button",onClick:o=>C.editContact(e.id)}," ✏️ ",8,u),(0,t.Lk)("button",{class:"delete-button",onClick:o=>C.deleteContact(e.id)}," 🗑️ ",8,m)])])))),128))])])])])]),I.showModal?((0,t.uX)(),(0,t.CE)("div",p,[(0,t.Lk)("div",g,[(0,t.Lk)("h2",null,(0,l.v_)(I.isEditing?"Editar Contacto":"Agregar Contacto"),1),(0,t.Lk)("form",{onSubmit:o[6]||(o[6]=(0,r.D$)(((...e)=>C.saveContact&&C.saveContact(...e)),["prevent"]))},[(0,t.Lk)("div",h,[o[9]||(o[9]=(0,t.Lk)("label",{for:"nombre"},"Nombre",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",id:"nombre","onUpdate:modelValue":o[1]||(o[1]=e=>I.form.nombre=e),placeholder:"Ingresa el nombre del cliente",required:""},null,512),[[r.Jo,I.form.nombre]])]),(0,t.Lk)("div",b,[o[10]||(o[10]=(0,t.Lk)("label",{for:"taxId"},"Tax ID",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",id:"taxId","onUpdate:modelValue":o[2]||(o[2]=e=>I.form.taxId=e),placeholder:"Ingresa el Tax ID",required:""},null,512),[[r.Jo,I.form.taxId]])]),(0,t.Lk)("div",k,[o[11]||(o[11]=(0,t.Lk)("label",{for:"telefono"},"Teléfono",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",id:"telefono","onUpdate:modelValue":o[3]||(o[3]=e=>I.form.telefono=e),placeholder:"Ingresa el teléfono",required:""},null,512),[[r.Jo,I.form.telefono]])]),(0,t.Lk)("div",f,[o[12]||(o[12]=(0,t.Lk)("label",{for:"observaciones"},"Observaciones",-1)),(0,t.bo)((0,t.Lk)("textarea",{id:"observaciones","onUpdate:modelValue":o[4]||(o[4]=e=>I.form.observaciones=e),placeholder:"Ingresa las observaciones"},null,512),[[r.Jo,I.form.observaciones]])]),(0,t.Lk)("div",v,[(0,t.Lk)("button",L,(0,l.v_)(I.isEditing?"Actualizar":"Guardar"),1),(0,t.Lk)("button",{type:"button",class:"cancel-button",onClick:o[5]||(o[5]=(...e)=>C.closeModal&&C.closeModal(...e))}," Cancelar ")])],32)])])):(0,t.Q3)("",!0)])}a(8992),a(4520),a(2577);var I=a(4373),C=a(2118),A=a(3697),y={components:{BarraLateral:C.A,Userbar:A.A},data(){return{contacts:[],showModal:!1,isEditing:!1,form:{id:null,nombre:"",taxId:"",telefono:"",observaciones:""},backendUrl:"http://localhost:3000/api/contacto",loading:!1}},methods:{async fetchContacts(){try{this.loading=!0;const e=await I.A.get(`${this.backendUrl}/list`);this.contacts=e.data}catch(e){console.error("Error al obtener los contactos:",e),alert("Ocurrió un error al obtener los contactos.")}finally{this.loading=!1}},openAddContactModal(){this.isEditing=!1,this.resetForm(),this.showModal=!0},editContact(e){const o=this.contacts.find((o=>o.id===e));o?(this.isEditing=!0,this.form={...o},this.showModal=!0):alert("Contacto no encontrado.")},async deleteContact(e){if(confirm("¿Estás seguro de eliminar este contacto?"))try{this.loading=!0,await I.A.delete(`${this.backendUrl}/delete/${e}`),this.contacts=this.contacts.filter((o=>o.id!==e)),alert("Contacto eliminado correctamente.")}catch(o){console.error("Error al eliminar el contacto:",o),alert("No se pudo eliminar el contacto.")}finally{this.loading=!1}},async saveContact(){try{this.loading=!0;const e={nombre:this.form.nombre,taxId:this.form.taxId,telefono:this.form.telefono,observaciones:this.form.observaciones};this.isEditing?(await I.A.put(`${this.backendUrl}/update/${this.form.id}`,e),alert("Contacto actualizado correctamente.")):(await I.A.post(`${this.backendUrl}/create`,e),alert("Contacto creado correctamente.")),this.closeModal(),this.fetchContacts()}catch(e){console.error("Error al guardar el contacto:",e),alert("Ocurrió un error al guardar el contacto.")}finally{this.loading=!1}},closeModal(){this.showModal=!1,this.resetForm()},resetForm(){this.form={id:null,nombre:"",taxId:"",telefono:"",observaciones:""}}},mounted(){this.fetchContacts()}},w=a(1241);const E=(0,w.A)(y,[["render",U],["__scopeId","data-v-662ba021"]]);var D=E}}]);
//# sourceMappingURL=440.6724639f.js.map